(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5640:function(e,t,o){Promise.resolve().then(o.t.bind(o,1034,23)),Promise.resolve().then(o.bind(o,970)),Promise.resolve().then(o.t.bind(o,3054,23))},970:function(e,t,o){"use strict";o.d(t,{DashboardProvider:function(){return l},Q:function(){return s}});var n=o(7437),r=o(2265),c=o(5040);let a=(0,r.createContext)(void 0),s=()=>{let e=(0,r.useContext)(a);if(!e)throw Error("useDashboard must be used within a DashboardProvider");return e},l=e=>{let{children:t}=e,[o,s]=(0,r.useState)(null),[l,i]=(0,r.useState)([]),[h,u]=(0,r.useState)([]),[d,f]=(0,r.useState)([]),[m,p]=(0,r.useState)(null),[_,y]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=(0,c.io)("http://localhost:8080",{extraHeaders:{"X-API-KEY":"secret-change-me"}});return p(e),e.on("connect",()=>console.log("Connected to server")),e.on("disconnect",()=>console.log("Disconnected")),e.on("stats",e=>{try{let t=JSON.parse(e);s(t),i(e=>[...e,{...t,time:Date.now()}].slice(-100))}catch(e){console.error(e)}}),e.on("map",e=>{try{let t=JSON.parse(e);"map"===t.type&&y(t.image)}catch(e){console.error(e)}}),e.on("connecting_success",e=>{try{let t=JSON.parse(e);"connecting_success"===t.type&&(console.log("Player connected:",t.playerdata),P())}catch(e){console.error(e)}}),P(),S(),()=>{e.disconnect()}},[]);let P=async()=>{try{let e=await fetch("http://localhost:8080/api/players",{headers:{"X-API-KEY":"secret-change-me"}});if(e.ok){let t=await e.json();u(t)}}catch(e){console.error(e)}},S=async()=>{try{let e=await fetch("http://localhost:8080/api/map",{headers:{"X-API-KEY":"secret-change-me"}});if(e.ok){let t=await e.json();f(t)}}catch(e){console.error(e)}},b=async e=>{try{await fetch("http://localhost:8080/api/command?cmd="+encodeURIComponent(e),{method:"POST",headers:{"X-API-KEY":"secret-change-me"}})}catch(e){console.error(e)}};return(0,n.jsx)(a.Provider,{value:{stats:o,statsHistory:l,players:h,entities:d,socket:m,mapImage:_,fetchPlayers:P,fetchMap:S,runCommand:b},children:t})}},3054:function(){},1034:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[6,40,971,23,744],function(){return e(e.s=5640)}),_N_E=e.O()}]);